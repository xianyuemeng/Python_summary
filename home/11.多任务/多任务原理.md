多任务
===

---

> 现代操作系统（Windows、Mac OS X、Linux、UNIX等）都支持“多任务”


* ## 什么是多任务？

    * 操作系统同时可以执行多个任务

* ## 单核CPU如何实现多任务？

    * 表面看，每个任务都是同时执行，实际是每个任务在轮循执行，只是CPU的调度太快，导致我们感觉像是所有任务在同时执行

* ## 多核CPU如何实现多任务？

    * 真正的并行执行多任务只能在多核CPU上实现，但是由于任务数量远远多于CPU的核心数量，所以操作系统也会自动把很多任务轮流调度到每个核心上执行

> 并发：看上去是一起执行，任务数多于CPU核心数
>并行：真正一起执行，任务数小于等于CPU核心数

* ## 实现多任务的方式：

    1. 多进程模式
    1. 多线程模式
    1. 协程模式
    1. 多进程+多线程模式

---

* # 单任务现象

    ```py
    # -*- coding:utf-8 -*-

    import time

    def fun():
        while True:
            print("this is a test too")
            time.sleep(1.5)

    if __name__ == '__main__':
        while True:
            print("this is a test")
            time.sleep(1)
        
        # 此处函数的调用会被上面的死循环一直阻塞，不能执行
        fun()
    ```

