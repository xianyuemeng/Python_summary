变量的作用域
===

---

>变量的作用域就是指变量的有效范围。
>变量按照作用范围分为两类，分别是 **全局变量** 和 **局部变量**。

### 全局变量 

* **在函数外部声明的变量就是全局变量**
    * 在任何区域或者页面都有效的变量
    * 在全局环境中直接声明的变量就是全局变量
    * 在局部环境中修改全局变量的值需要使用global关键字
* **有效范围**
    * 全局变量在函数外部可以正常使用。
    * 全局变量在函数内部也可以正常使用(需要用global声明)

    ```py
    var = '我是全局变量'
    def hanshu():
        jubuvar = '我是局部变量'
    ```

### 局部变量

* **在函数内部声明的变量就是局部变量**

    * 在特定的局部区域有效的变量就是局部变量
    * 在函数内部(局部环境中)声明的变量就是局部变量
    * 在内部函数中修改内部函数外部的非全局变量,需要使用nonlocal关键字

* **有效范围**
    * 局部变量在函数内部可以正常使用
    * 局部变量在函数外部不可以访问

---

### global关键字

* **global的作用就是把局部变量提升为全局变量**

**格式：**

```py
def 函数名():
    global 变量名
    函数功能代码...
```
**示例：**

```py
def funName():
    global name #如果不使用global关键字，外部是无法访问变量name的。
    name = 'dragon'

funName()  #调用

print(name)  #尝试访问内部函数

'''注释：
global只有在函数内部对变量进行全局声明，该变量才是一个完整的全局变量(在函数外部可以对该变量进行任意操作)。
'''
```

**作用：**

* 使全局变量能进入局部环境

    ```py
    var = '我是全局变量'

    def func():
        global var
        var = '全局变量进入局部环境,修改全局变量'
        
    func()
    print(var)
    ```
* 将局部变量升级为全局变量

    ```py
    def func():
	global var
	var = '我升级成全局变量'

    func()
    print(var)
    ```

---

###  nonlocal关键字

* **nonlocal关键字的意义，用于在内部函数中修改内部函数外部的非全局变量的值。**

    ```py
    #声明一个外部函数
    def outer():
        #声明一个变量(肯定不是全局变量)
        x = 5
        #声明一个内部函数
        def inner():
            nonlocal x  #声明x不是局部变量
            x += 9
            print(x)
        #调用函数
        inner()
    #调用outer
    outer()

    '''注释：
    如果内部函数想使用全局变量，那么应该使用global声明变量
    (函数最外层的全局变量)
    如果内部函数使用的是外部函数的局部变量，那么应该使用nonlocal声明
    (内部函数的外层，外部函数的局部变量)
    '''
    ```

